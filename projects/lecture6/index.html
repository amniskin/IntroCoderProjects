<!DOCTYPE html>

<html>
  <head>
    <title>
      Pretty functional
    </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='import' id='templates-import' href='/templates/projects.html'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel='stylesheet' href='/style/style.css' type='text/css'>
    <script src='/js/coder.js'></script>
  </head>
  <body data-spy="scroll" data-target="#nav-container">
    <project-header tag="Let's make something simply professional!" author="Aaron Niskin"></project-header>
    <project-intro>
      <p>In this coder project, we will be writing the front end of our
      next coder project. As long as we're doing that, we're going to try
      and learn a few things along the way. You can see a completed
      version of this product <a href='/assessments/lecture7.html'>here</a>.</p>
    </project-intro>
    <project-objectives>
      <ul>
        <li>Practice making simple yet attractive sites using CSS frameworks</li>
        <li>Handling forms and understanding form submissions</li>
        <li>Practice with Javascript basics</li>
      </ul>
      <h4>For the A students:</h4>
      <ul>
        <li>Learn some techniques for transforming strings into objects and arrays</li>
        <li>Get more experience with strings and arrays</li>
        <li>Learn a bit of the functional programming style</li>
      </ul>
    </project-objectives>
    <project-prereqs>
      <ul>
        <li>Basic HTML and CSS skills</li>
        <li>We're going to be using Bootstrap</li>
        <li>Javascript requirements:
          <ul>
            <li>Select elements by ID</li>
            <li>Arithmetic operations</li>
            <li>Naming variables</li>
            <li>Declaring functions</li>
            <li>If statements</li>
            <li>Basic familiarity with JavaScript objects and arrays</li>
          </ul>
        </li>
      </ul>
    </project-prereqs>
    <project-step title="Set up some basic HTML">
      <p>This part should be easy by now. Let's set up a basic HTML file, complete with a <code>link</code> tag for our style sheet, and a <code>script</code> tag for our JavaScript file. Make sure you link in a copy of Bootstrap's CSS and JavaScript files as well.</p>
      <pre class='hint blur'>&#60;!DOCTYPE html>

&#60;html>
  &#60;head>
    &#60;link rel='stylesheet' href='/style/main.css' type='text/css'>
    &#60;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    &#60;link rel='stylesheet' href='/style/style.css' type='text/css'>
    &#60;script src="http://code.jquery.com/jquery-2.1.4.min.js">&#60;/script>
    &#60;script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous">&#60;/script>
    &#60;title>
      Something awesome
    &#60;/title>
  &#60;/head>
  &#60;body>
  &#60;/body>
&#60;/html></pre>
    </project-step>
    <project-step title="Let's get us a JUMBOTRON!">
      <p>We want our page to really pop. Besides, pages just look weird without a header, right? Let's go ahead and put in a Jumbotron on the top of our page. It should look like the picture below. If you're unsure of how to do this, go to <a href='http://getbootstrap.com'>getbootstrap.com</a> and check out their documentation. This is actually the point of this exercise. So head on over there and let's get a jumbotron on our page!</p>
      <project-img src='banner.png'>
      <p class='hint blur'>If you're having trouble, check out Bootstrap's <a href='http://getbootstrap.com/components/'>components</a> section.</p>
      <br>
      <p class='hint blur'>We're looking for a jumbotron, so we probably want to check out the jumbotron section of the components page.</p>
    </project-step>
    <project-step title="Setting up the form!">
      <p>Next, we'd like to put a simple contact form. This form will connect to our "lifter" RESTful API on the FVI servers and return some information (based off of the data given). Some information we might want:</p>
      <ul>
        <li>First name</li>
        <li>Last name</li>
        <li>Email address</li>
        <li>Favorite supersets
          <ul>
            <li>Bench press with barbell curls</li>
            <li>Incline bench with barbell curls</li>
            <li>Barbell curls with bench press</li>
            <li>I don't even lift <s>(or I work out legs)</s></li>
          </ul>
        </li>
        <li>Whether or not the person is checking me out</li>
        <li>Do they even lift, bro?</li>
      </ul>
      <p>So let's make a form with the above fields. If you're unsure of how to do this, check out Bootstrap's section on forms (in the CSS page. Once you've done that, let's go into why things are the way they are.</p>
      <p>You may have noticed that the input fields have an ID and the labels have a <code>for</code> attribute with the same value. That is because Bootstrap uses JavaScript to add some interaction between the <code>label</code> and its corresponding <code>input</code> tag. This interaction requires retrieving the label element from the DOM. To do this, Bootstrap uses the input's ID and the now familiar <code>document.getElementById</code> method.</p>
      <p>Next you might have noticed that the elements all have a <code>type</code> field. This is a very useful tool, but for this lesson, we'll be sticking mainly to <code>type="text"</code>. Lastly, you've probably noticed that these have some classes included. but we should be pretty used to that. Bootstrap uses classes to add style (via CSS) and behaviors (via JavaScript) to elements.</p>
      <p>Penultimately, we notice that the Superset preference field is not actually an input field at all. For that, we're going to want to use the <code>select</code> tag with a few <code>option</code> tag children. These options should reflect the options we want for this input (the list of options above).</p>
      <p>Lastly, we have a couple of yes/no questions. These are where we want to use check boxes (or radios if they're mutually exclusive like male/female, or under 18/over 18, etc.). So, as you probably guessed, you should check out Bootstrap's website for clarification on how to do this while utilizing their CSS.</p>
    </project-step>
    <project-step title="Forms and how they work!">
      <p>Once we've done that, we're going to want to add a <code>name</code> attribute to each of these elements. This attribute is a hugely important part of our form. The value of this name attribute is what is sent with the form as the variable name. In other words, if we have a text input with <code>name='field1'</code>, and the user inputs "hey" as the value to be sent, what will actually be sent is <code>field1=hey</code>. Needless to say, we generally want to make sure that these names are unique. Furthermore, the names will be determined by the requirements of the back-end. For example, if the back-end is not expecting anything named "field1", then when we send <code>field1=hey</code>, the back-end will not understand what this data. This miscommunication is the cause of many broken forms.</p>
      <p>In this project, the back-end is set up to understand these field names:</p>
      <ul>
        <li>fname</li>
        <li>lname</li>
        <li>email</li>
        <li>supa</li>
        <li>checker</li>
        <li>lifter</li>
      </ul>
      <p>So let's go ahead and add those name fields where appropriate now.</p>
    </project-step>
    <project-step title="Do you even grid, bro?!">
      <p>So, you may have noticed that your forms are taking up the whole width of the page. That doesn't look too good, right? Why don't we use the illustrious grid system that comes standard with Bootstrap's CSS file. For now, let's put everything in full width columns, within a <code>container</code> div. Remember that whenever we use column elements, we have to put them within <code>row</code> elements.</p>
      <p>Things should probalby look considerably better now. Next we're going to make a submit button and specify what the form should do on submit.</p>
      <project-img src='grid.png'>
    </project-step>
    <project-step title="The magical submit button">
      <p>At the end of our form but still within the form, let's add a <code>button</code> tag. This element should have <code>type="submit"</code> included. This type being set to submit is what tells the program that this button is the submit button. So let's go ahead and put a submit button at the bottom of the form (make sure it's within our form though!). To get the button to look stylish rather than like a joke from 1993, let's consult Bootstrap's documentation and see how to add their button style.</p>
    </project-step>
    <project-step title="Forms are for working!">
      <p>All that's left to do is connect to this form to something useful. As it happens, we have a server set up to handle these requests specifically. The server is located at <a href='http://fvi-grad.com:1234/coder/l6'>http://fvi-grad:1234/coder/l6</a>. That link is accessing <a href='http://fvi-grad.com'>fvi-grad.com</a> through port 1234. Basically, what that means is that we're not accessing the website through traditional channels; so we should not expect to get the standard fvi-grad website through our form (once we set the form action to the aforementioned url).</p>
      <p>As one might expect, we can set a form action by adding an attribute <code>action</code> to our form with the value being the url we want to send the data to. In our case, we want to set <code>action='http://fvi-grad.com:1234/coder/l6'</code>.</p>
    </project-step>
    <project-step title="Lookin good, bro!" last="true">
      <p>Now that you've got all those gains, you should go show it off!...</p>
      <p>Or...</p>
      <p>Or...</p>
      <p>Or, we could take it a step further. Let's get rid of the form action. Let's instead use JavaScript to turn the serialized data that the form would send into a JavaScript object (key/value pairs) that we could use later for something. Why would we do this, you ask? Why would we go through all this work just to undo it and make the program do something completely different? Because we can! That's why! And also, if you can't already see how to do it, wouldn't you like to learn?</p>
      <p>Let's just get to it, yeah?</p>
    </project-step>
    <project-step title="Serialize for great good">
      <p>Hopefully you checked out the URL after the form submitted (if not, go back and do so!). String serialization is basically getting the form to look like that latter part of the URL back when our form actually worked. Luckily, jQuery has a method built in to serialize forms. This method is called <code>serialize()</code>, of course, and as you'd expect, you need to call it on a jQuery form element. In our case, we're going to call it thusly:</p>
      <pre>var serializedForm = $('#form-id').serialize();</pre>
      <p>where the ID of the form is <code>form-id</code>.</p>
      <p>Just to check out what we have so far, let's attach a click handler to the form button. This click handler should,</p>
      <ul>
        <li>prevent the default behavior</li>
        <li>serialize the form</li>
        <li>log the serialized form to the console.</li>
      </ul>
      <p>Make sure you have your code load after the document has loaded</p>
      <p class='hint blur'>To make the document load first, you can use <code>$(document).ready(function(){...})</code></p>
      <pre class='hint blur'>$(document).ready(function() {
  $('#form-btn').click(function(event) {
    event.preventDefault();
    var serialForm = $('#user-form').serialize();
    console.log(serialForm);
  })
})</pre>
    </project-step>
    <project-step title="On splitting strings">
      <p>The essence of this code will lie in the <code>split</code> method for strings in JavaScript. This method acts on strings and takes a smaller string as its argument. The method then takes the string it's acting on and splits the string at every occurence of the argument string and returns a JavaScript array of the substrings. For example,</p>
      <pre>"hey there, buddy".split(" ");
    ==> ["hey", "there,", "buddy"]</pre>
      <pre>var str = "hey there, buddy";
str.split(' ');
    ==> ["hey", "there,", "buddy"]</pre>
      <pre>var str = "hey there, buddy";
str.split(', ');
    ==> ["hey there", "buddy"]</pre>
      <pre>var str = "hey there, buddy";
str.split(': ');
    ==> ["hey there, buddy"]</pre>
      <p>For more experience, go ahead and play around with this method. Test it out with different strings as both the string to be acted on and the argument string. Once you've done that, come back to this and move on.</p>
    </project-step>
    <project-step title="Splitting strings">
      <p>We want to split our string intelligently. Our serialized data will look a bit like <code>"key1=val1&key2=val2&...&keyn=valn"</code>, where each <code>keyi=vali</code> are key-value pairs. So, really, everything between consecutive ampersands is kind-of like a single unit. For that reason, we probalby want to split this string at each ampersand first. That way we will end up with an array of these units as opposed to some other disorganized array. So let's go ahead and split our serialized string at each ampersand and save the result in a variable named <code>ampSplit</code>.</p>
      <pre class='hint blur'>var ampSplit = serialForm.split('&');</pre>
      <p>Now we have an array of strings where each string is a key-value pair separated by an equal sign. That implies that we want to split each of these strings at the equal signs. To do this, we're going to want to loop through the array and for each element, split it at the equal sign. Let's do go ahead and do that and save the result in a variable named <code>eqSplit</code>.</p>
      <pre class='hint blur'>var eqSplit;
for(var i = 0; i&#60;ampSplit.length; i++) {
  eqSplit[i] = ampSplit[i].split('=');
}</pre>
    </project-step>
    <project-step title="Making things (or objects">
      <p>Now we should have an array of arrays where the inner arrays are the key value pairs. We want to turn this into a single JavaScript object. To do this, we're going to need to (as you probably guessed) loop through the array. We will actually find another, simpler, more awesome way to do this in the followup project, but for now let's stick with these.</p>
      <p>Let's first declare a variable for our pending object. As always, we need to try and give it a descriptive name like <code>formDataObj</code>. Now we know we're going to want to loop through this array (to get all the keys and values associated in <code>formDataObj</code>, so let's get one started! Don't worry about the contents of the loop just yet, we'll figure that out next.</p>
      <pre class='hint blur'>for(var i = 0; i &#60; eqSplit.length; i++) {
  ...
}</pre>
      <p>Since we're looping through the array, let's walk through the loop. At first, you get the first element of the array, which should look something like <code>["key1", "val1"]</code> (an array where the first thing is the key string and the second is the value string). So in this case, we want to set <code>formDataObj["key1"] = "val1"</code> (associate the value "val1" with the keyword "key1"). In our very specific case of <code>eqSplit</code>, we might have something like <code>[["fname", "Aaron"], ["lname", "Niskin"]]</code>, and we want to associate these two key value pairs. In even more concrete terms, we want to set <code>formDataObj["fname"] = "Aaron"</code>, and <code>formDataObj["lname"] = "Niskin"</code>.</p>
      <p>If we are to generalize this to the rest of the loop, we want to get this referencing only the element we're currently on in the array like so: if we let the current element we're working with (<code>["key1", "val1"]</code>) be called <code>thing</code>, then we want <code>formDataObj[thing[0]] = thing[1]</code>. We can see this in eqSplit as well. If we set <code>var thing1 = ["fname", "Aaron"]; var thing2 = ["lname", "Niskin"];</code>, then we want <code>formDataObj[thing1[0]] = thing1[1]; formDataObj[thing2[0]] = thing2[1]</code>.</p>
      <p>If we simply call them <code>thing</code> instead of thing1 or thing2, we're going to want to set <code>formDataObj[thing[0]] = thing[1]</code> for all of the elements of this array. So, in our loop, we're going to want to grab that element of the array, and store it in a variable (possibly called <code>e</code> or something similar), then set <code>formDataObj[e[0]] = e[1]</code>. Let's go ahead and do it!</p>
      <pre class='hint blur'>for(var i = 0; i &#60; eqSplit.length; i++){
  var e = eqSplit[i];
  formDataObj[e[0]] = e[1];
}</pre>
      <p>Just to be sure, let's have the same click handler log this object to the console so we can see what we get.</p>
    </project-step>
    <project-step title="CHECK OUT THAT OBJECT!">
      <p>You did that. You just did that. You made that object, bro. Play around with it. Have fun. Go wild.</p>
    </project-step>
  </body>
</html>
